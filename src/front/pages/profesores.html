<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Portal Profesores - Boy Happy</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
<!-- STYLES -->
</head>
<body>
<aside class="sidebar">
  <div class="sidebar-logo">
    <i class="fas fa-graduation-cap"></i>
    <span>Boy Happy</span>
  </div>
  <ul class="sidebar-menu">
    <li><a href="#" onclick="showSection('anuncios'); return false;" class="active"><i class="fas fa-bullhorn"></i> Anuncios</a></li>
    <li><a href="#" onclick="showSection('asistencia'); return false;"><i class="fas fa-check-circle"></i> Asistencia</a></li>
    <li><a href="#" onclick="showSection('notas'); return false;"><i class="fas fa-star"></i> Notas</a></li>
    <li><a href="#" onclick="showSection('promedios'); return false;"><i class="fas fa-chart-bar"></i> Promedios</a></li>
    <li><a href="#" onclick="showSection('materiales'); return false;"><i class="fas fa-folder-open"></i> Materiales</a></li>
    <li><a href="#" onclick="showSection('bitacora'); return false;"><i class="fas fa-book-open"></i> Bitácora de Clases</a></li>
    <li><a href="#" onclick="showSection('calendario'); return false;"><i class="fas fa-calendar"></i> Calendario</a></li>
    <li><a href="#" onclick="showSection('cursos'); return false;"><i class="fas fa-book"></i> Mis Cursos</a></li>
  </ul>
  <button class="logout-btn" onclick="cerrarSesion()">
    <i class="fas fa-sign-out-alt"></i>
    <span>Cerrar Sesión</span>
  </button>
</aside>

<main class="main-content">
  <!-- Anuncios Section -->
  <div id="anuncios" class="section active">
    <div class="content-header">
      <h1><i class="fas fa-bullhorn"></i> Anuncios</h1>
    </div>
    <div id="listaAnunciosPortal"></div>
  </div>

  <!-- Asistencia Section -->
  <div id="asistencia" class="section">
    <div class="content-header">
      <h1><i class="fas fa-check-circle"></i> Registro de Asistencia</h1>
    </div>

    <div class="card">
      <div class="form-group">
        <label for="asistenciaCurso">Curso</label>
        <select id="asistenciaCurso">
          <option value="">Seleccionar curso</option>
          <option value="medio-mayor">Medio Mayor</option>
          <option value="prekinder-a">Prekínder A</option>
          <option value="prekinder-b">Prekínder B</option>
          <option value="kinder">Kínder</option>
          <option value="extension">Extensión Horaria</option>
        </select>
      </div>

      <div class="form-group">
        <label for="asistenciaFecha">Fecha</label>
        <input type="date" id="asistenciaFecha" value="">
      </div>

      <button class="btn btn-primary" onclick="cargarAlumnosAsistencia()">
        <i class="fas fa-users"></i> Cargar Alumnos
      </button>
    </div>

    <div id="listaAlumnosAsistencia" style="margin-top: 20px;"></div>

    <div id="botonesAsistencia" style="display: none; margin-top: 20px; text-align: center;">
      <button class="btn btn-success" onclick="guardarAsistencia()">
        <i class="fas fa-save"></i> Guardar Asistencia
      </button>
    </div>

    <!-- CU-33, 34: Modificar asistencia y reportes -->
    <div class="card" style="margin-top: 30px;">
      <h3><i class="fas fa-edit"></i> Consultar y Modificar Asistencia Registrada</h3>

      <div class="form-row">
        <div class="form-group">
          <label for="consultaCurso">Curso</label>
          <select id="consultaCurso">
            <option value="">Seleccionar curso</option>
            <option value="medio-mayor">Medio Mayor</option>
            <option value="prekinder-a">Prekínder A</option>
            <option value="prekinder-b">Prekínder B</option>
            <option value="kinder">Kínder</option>
            <option value="extension">Extensión Horaria</option>
          </select>
        </div>
        <div class="form-group">
          <label for="consultaFecha">Fecha</label>
          <input type="date" id="consultaFecha">
        </div>
      </div>

      <button class="btn btn-primary" onclick="consultarAsistencia()">
        <i class="fas fa-search"></i> Consultar
      </button>
    </div>

    <div id="tablaAsistenciaConsulta" style="margin-top: 20px;"></div>

    <!-- CU-34: Reporte de asistencia y alertas -->
    <div class="card" style="margin-top: 30px;">
      <h3><i class="fas fa-chart-line"></i> Reporte de Asistencia y Alertas</h3>

      <div class="form-row">
        <div class="form-group">
          <label for="reporteCurso">Curso</label>
          <select id="reporteCurso">
            <option value="">Seleccionar curso</option>
            <option value="medio-mayor">Medio Mayor</option>
            <option value="prekinder-a">Prekínder A</option>
            <option value="prekinder-b">Prekínder B</option>
            <option value="kinder">Kínder</option>
            <option value="extension">Extensión Horaria</option>
          </select>
        </div>
        <div class="form-group">
          <label for="reporteFechaInicio">Desde</label>
          <input type="date" id="reporteFechaInicio">
        </div>
        <div class="form-group">
          <label for="reporteFechaFin">Hasta</label>
          <input type="date" id="reporteFechaFin">
        </div>
      </div>

      <button class="btn btn-success" onclick="generarReporteAsistencia()">
        <i class="fas fa-file-alt"></i> Generar Reporte
      </button>
    </div>

    <div id="reporteAsistencia" style="margin-top: 20px;"></div>
  </div>

  <!-- Notas Section -->
  <div id="notas" class="section">
    <div class="content-header">
      <h1><i class="fas fa-star"></i> Gestión de Notas</h1>
    </div>

    <div class="card">
      <h3><i class="fas fa-plus-circle"></i> Registrar Nueva Nota</h3>
      <form id="formNota" onsubmit="guardarNota(event)">
        <div class="form-row">
          <div class="form-group">
            <label for="notaCurso">Curso *</label>
            <select id="notaCurso" required onchange="cargarAlumnosPorCurso()">
              <option value="">Seleccionar curso</option>
              <option value="medio-mayor">Medio Mayor</option>
              <option value="prekinder-a">Prekínder A</option>
              <option value="prekinder-b">Prekínder B</option>
              <option value="kinder">Kínder</option>
              <option value="extension">Extensión Horaria</option>
            </select>
          </div>

          <div class="form-group">
            <label for="notaAlumno">Alumno *</label>
            <select id="notaAlumno" required disabled>
              <option value="">Primero selecciona un curso</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="notaAsignatura">Asignatura *</label>
            <select id="notaAsignatura" required>
              <option value="">Seleccionar asignatura</option>
              <option value="lenguaje">Lenguaje</option>
              <option value="matematicas">Matemáticas</option>
              <option value="ciencias">Ciencias</option>
              <option value="arte">Arte</option>
              <option value="musica">Música</option>
              <option value="educacion-fisica">Educación Física</option>
            </select>
          </div>

          <div class="form-group">
            <label for="notaAmbito">Ámbito de Experiencia *</label>
            <select id="notaAmbito" required>
              <option value="">Seleccionar ámbito</option>
              <option value="desarrollo-personal">Desarrollo Personal y Social</option>
              <option value="comunicacion-integral">Comunicación Integral</option>
              <option value="interaccion-comprension">Interacción y Comprensión del Entorno</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label for="notaObjetivo">Objetivo de Aprendizaje *</label>
          <textarea id="notaObjetivo" rows="2" placeholder="Ej: Expresar oralmente sus necesidades e intereses..." required></textarea>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="notaNivel">Nivel de Logro *</label>
            <select id="notaNivel" required>
              <option value="">Seleccionar nivel</option>
              <option value="L">L - Logrado</option>
              <option value="NL">NL - No Logrado</option>
              <option value="OD">OD - Objetivo en Desarrollo</option>
              <option value="NT">NT - Objetivo No Trabajado</option>
            </select>
          </div>

          <div class="form-group">
            <label for="notaFecha">Fecha *</label>
            <input type="date" id="notaFecha" required>
          </div>
        </div>

        <div class="form-group">
          <label for="notaObservacion">Observación</label>
          <textarea id="notaObservacion" rows="2" placeholder="Observaciones sobre el desempeño del niño/a (opcional)"></textarea>
        </div>

        <button type="submit" class="btn btn-success">
          <i class="fas fa-save"></i> Guardar Evaluación
        </button>
      </form>
    </div>

    <div class="card" style="margin-top: 20px;">
      <h3><i class="fas fa-search"></i> Consultar Notas</h3>
      <div class="form-row">
        <div class="form-group">
          <label for="consultaCurso">Curso</label>
          <select id="consultaCurso" onchange="consultarNotas()">
            <option value="">Todos los cursos</option>
            <option value="medio-mayor">Medio Mayor</option>
            <option value="prekinder-a">Prekínder A</option>
            <option value="prekinder-b">Prekínder B</option>
            <option value="kinder">Kínder</option>
            <option value="extension">Extensión Horaria</option>
          </select>
        </div>

        <div class="form-group">
          <label for="consultaAsignatura">Asignatura</label>
          <select id="consultaAsignatura" onchange="consultarNotas()">
            <option value="">Todas las asignaturas</option>
            <option value="lenguaje">Lenguaje</option>
            <option value="matematicas">Matemáticas</option>
            <option value="ciencias">Ciencias</option>
            <option value="arte">Arte</option>
            <option value="musica">Música</option>
            <option value="educacion-fisica">Educación Física</option>
          </select>
        </div>
      </div>

      <div id="listaNotas" style="margin-top: 20px;"></div>
    </div>
  </div>

  <!-- Materiales Section -->
  <div id="materiales" class="section">
    <div class="content-header">
      <h1><i class="fas fa-folder-open"></i> Materiales Didácticos</h1>
    </div>

    <div class="card">
      <h3><i class="fas fa-cloud-upload-alt"></i> Subir Nuevo Material</h3>
      <form id="formMaterial" onsubmit="subirMaterial(event)">
        <div class="form-row">
          <div class="form-group">
            <label for="materialCurso">Curso *</label>
            <select id="materialCurso" required>
              <option value="">Seleccionar curso</option>
              <option value="medio-mayor">Medio Mayor</option>
              <option value="prekinder-a">Prekínder A</option>
              <option value="prekinder-b">Prekínder B</option>
              <option value="kinder">Kínder</option>
              <option value="extension">Extensión Horaria</option>
            </select>
          </div>

          <div class="form-group">
            <label for="materialAsignatura">Asignatura *</label>
            <select id="materialAsignatura" required>
              <option value="">Seleccionar asignatura</option>
              <option value="lenguaje">Lenguaje</option>
              <option value="matematicas">Matemáticas</option>
              <option value="ciencias">Ciencias</option>
              <option value="arte">Arte</option>
              <option value="musica">Música</option>
              <option value="educacion-fisica">Educación Física</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label for="materialTitulo">Título *</label>
          <input type="text" id="materialTitulo" required placeholder="Ej: Guía de ejercicios de matemáticas">
        </div>

        <div class="form-group">
          <label for="materialDescripcion">Descripción</label>
          <textarea id="materialDescripcion" rows="2" placeholder="Descripción del material (opcional)"></textarea>
        </div>

        <div class="form-group">
          <label for="materialArchivo">Archivo *</label>
          <input type="file" id="materialArchivo" required>
          <small style="color: #666;">Formatos permitidos: PDF, DOC, DOCX, PPT, PPTX, XLS, XLSX, JPG, PNG, MP4</small>
        </div>

        <button type="submit" class="btn btn-success">
          <i class="fas fa-upload"></i> Subir Material
        </button>
      </form>
    </div>

    <div class="card" style="margin-top: 20px;">
      <h3><i class="fas fa-search"></i> Consultar Materiales</h3>
      <div class="form-row">
        <div class="form-group">
          <label for="consultaMaterialCurso">Curso</label>
          <select id="consultaMaterialCurso" onchange="consultarMateriales()">
            <option value="">Todos los cursos</option>
            <option value="medio-mayor">Medio Mayor</option>
            <option value="prekinder-a">Prekínder A</option>
            <option value="prekinder-b">Prekínder B</option>
            <option value="kinder">Kínder</option>
            <option value="extension">Extensión Horaria</option>
          </select>
        </div>

        <div class="form-group">
          <label for="consultaMaterialAsignatura">Asignatura</label>
          <select id="consultaMaterialAsignatura" onchange="consultarMateriales()">
            <option value="">Todas las asignaturas</option>
            <option value="lenguaje">Lenguaje</option>
            <option value="matematicas">Matemáticas</option>
            <option value="ciencias">Ciencias</option>
            <option value="arte">Arte</option>
            <option value="musica">Música</option>
            <option value="educacion-fisica">Educación Física</option>
          </select>
        </div>
      </div>

      <div id="listaMateriales" style="margin-top: 20px;"></div>
    </div>
  </div>

  <!-- Calendario Section -->
  <div id="calendario" class="section">
    <div class="content-header">
      <h1><i class="fas fa-calendar"></i> Calendario General</h1>
      <button class="btn btn-primary" onclick="openModal()">
        <i class="fas fa-plus"></i> Añadir Evento/Evaluación
      </button>
    </div>
    <div id="calendar"></div>
  </div>

  <!-- Promedios Section (CU-31) -->
  <div id="promedios" class="section">
    <div class="content-header">
      <h1><i class="fas fa-chart-bar"></i> Promedios por Alumno</h1>
    </div>

    <div class="card">
      <h3>Seleccionar Alumno</h3>
      <div class="form-row">
        <div class="form-group">
          <label for="promedioCurso">Curso:</label>
          <select id="promedioCurso" onchange="cargarAlumnosPorCurso()">
            <option value="">-- Seleccionar curso --</option>
            <option value="medio-mayor">Medio Mayor</option>
            <option value="prekinder-a">Prekínder A</option>
            <option value="prekinder-b">Prekínder B</option>
            <option value="kinder">Kínder</option>
          </select>
        </div>

        <div class="form-group">
          <label for="promedioAlumno">Alumno:</label>
          <select id="promedioAlumno" onchange="cargarPromediosAlumno()">
            <option value="">-- Primero seleccione un curso --</option>
          </select>
        </div>
      </div>
    </div>

    <div id="contenedorPromedios"></div>
  </div>

  <!-- Bitácora de Clases Section - CU-36 -->
  <div id="bitacora" class="section">
    <div class="content-header">
      <h1><i class="fas fa-book-open"></i> Bitácora de Clases</h1>
      <p>Registra y consulta el desarrollo de tus clases</p>
    </div>

    <!-- Formulario para registrar bitácora -->
    <div class="card">
      <h3><i class="fas fa-plus-circle"></i> Registrar Clase</h3>
      <form id="formBitacora" onsubmit="guardarBitacora(event)">
        <div class="form-row">
          <div class="form-group">
            <label for="bitacoraCurso">Curso *</label>
            <select id="bitacoraCurso" required>
              <option value="">Seleccionar curso</option>
              <option value="Pre-Kinder">Pre-Kinder</option>
              <option value="Kinder">Kinder</option>
              <option value="1° Básico">1° Básico</option>
              <option value="2° Básico">2° Básico</option>
            </select>
          </div>

          <div class="form-group">
            <label for="bitacoraAsignatura">Asignatura *</label>
            <select id="bitacoraAsignatura" required>
              <option value="">Seleccionar asignatura</option>
              <option value="Lenguaje">Lenguaje</option>
              <option value="Matemáticas">Matemáticas</option>
              <option value="Ciencias">Ciencias</option>
              <option value="Historia">Historia</option>
              <option value="Artes">Artes</option>
              <option value="Educación Física">Educación Física</option>
            </select>
          </div>

          <div class="form-group">
            <label for="bitacoraFecha">Fecha *</label>
            <input type="date" id="bitacoraFecha" required>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="bitacoraUnidad">Unidad</label>
            <input type="text" id="bitacoraUnidad" placeholder="Ej: Unidad 1 - Los seres vivos">
          </div>

          <div class="form-group">
            <label for="bitacoraTema">Tema de la Clase *</label>
            <input type="text" id="bitacoraTema" placeholder="Ej: Las plantas y sus partes" required>
          </div>
        </div>

        <div class="form-group">
          <label for="bitacoraContenido">Contenido Trabajado *</label>
          <textarea id="bitacoraContenido" rows="3" required
                    placeholder="Describe los contenidos que se trabajaron durante la clase..."></textarea>
        </div>

        <div class="form-group">
          <label for="bitacoraObjetivos">Objetivos de Aprendizaje</label>
          <textarea id="bitacoraObjetivos" rows="3"
                    placeholder="Escribe cada objetivo en una línea nueva...&#10;Ej:&#10;- Identificar las partes de una planta&#10;- Reconocer la importancia del agua para las plantas"></textarea>
          <small style="color: #666;">Escribe cada objetivo en una línea nueva</small>
        </div>

        <div class="form-group">
          <label for="bitacoraObservaciones">Observaciones</label>
          <textarea id="bitacoraObservaciones" rows="2"
                    placeholder="Observaciones generales sobre la clase, dificultades encontradas, sugerencias..."></textarea>
        </div>

        <button type="submit" class="btn btn-success">
          <i class="fas fa-save"></i> Guardar Bitácora
        </button>
      </form>
    </div>

    <!-- Consultar bitácora -->
    <div class="card" style="margin-top: 25px;">
      <h3><i class="fas fa-search"></i> Consultar Bitácora</h3>
      <div class="form-row">
        <div class="form-group">
          <label for="consultaBitacoraCurso">Curso</label>
          <select id="consultaBitacoraCurso" onchange="consultarBitacora()">
            <option value="">Seleccionar curso</option>
            <option value="Pre-Kinder">Pre-Kinder</option>
            <option value="Kinder">Kinder</option>
            <option value="1° Básico">1° Básico</option>
            <option value="2° Básico">2° Básico</option>
          </select>
        </div>

        <div class="form-group">
          <label for="consultaBitacoraAsignatura">Asignatura (opcional)</label>
          <select id="consultaBitacoraAsignatura" onchange="consultarBitacora()">
            <option value="">Todas</option>
            <option value="Lenguaje">Lenguaje</option>
            <option value="Matemáticas">Matemáticas</option>
            <option value="Ciencias">Ciencias</option>
            <option value="Historia">Historia</option>
            <option value="Artes">Artes</option>
            <option value="Educación Física">Educación Física</option>
          </select>
        </div>
      </div>
    </div>

    <div id="listaBitacora"></div>
  </div>

  <!-- Cursos Section -->
  <div id="cursos" class="section">
    <div class="content-header">
      <h1><i class="fas fa-book"></i> Mis Cursos</h1>
    </div>
    <div class="card">
      <p>Lista de cursos asignados.</p>
    </div>
  </div>
</main>

<!-- Modal eventos -->
<div id="modal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <h2>Nuevo Evento/Evaluación</h2>
    <form id="eventForm">
      <div class="form-group">
        <label for="titulo">Título</label>
        <input id="titulo" type="text" name="titulo" required>
      </div>
      <div class="form-group">
        <label for="descripcion">Descripción</label>
        <textarea id="descripcion" name="descripcion"></textarea>
      </div>
      <div class="form-group">
        <label for="fecha">Fecha</label>
        <input id="fecha" type="date" name="fecha" required>
      </div>
      <div class="form-group">
        <label for="hora">Hora</label>
        <input id="hora" type="time" name="hora">
      </div>
      <div class="form-group">
        <label for="tipo">Tipo</label>
        <select id="tipo" name="tipo">
          <option value="evento">Evento</option>
          <option value="evaluacion">Evaluación</option>
        </select>
      </div>
      <div class="form-group">
        <label for="curso">Curso</label>
        <select id="curso" name="curso">
          <option value="todos">Todos</option>
          <option value="medio-mayor">Medio Mayor</option>
          <option value="prekinder-a">Prekínder A</option>
          <option value="prekinder-b">Prekínder B</option>
          <option value="kinder">Kínder</option>
          <option value="extension">Extensión Horaria</option>
        </select>
      </div>
      <div style="text-align:center; margin-top:20px;">
        <button type="submit" class="btn btn-primary">Guardar</button>
        <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancelar</button>
      </div>
    </form>
  </div>
</div>

<!-- SCRIPT -->
</body>
</html>
